title: Job Failed
description: |
  The nightly data processing job has been failing for the past week.
  It used to work fine, but now it times out and gets killed by Kubernetes.
theme: jobs-cronjobs
difficulty: medium
estimated_time: 15
initial_situation: |
  A CronJob that processes data every night has been consistently failing.
  The job starts running but gets terminated before completion.
  The processing logic hasn't changed, but something in the cluster configuration is causing issues.
objective: |
  Investigate why the nightly job keeps failing and restore normal operation.
  The processing workflow should complete successfully every night.

validations:
  - key: job-completion-check
    title: "Job Completed"
    description: "The data-processor Job must reach 'Complete' status"
    order: 1
    type: status
    spec:
      target:
        kind: Job
        labelSelector:
          app: data-processor
      conditions:
        - type: Complete
          status: "True"

  - key: job-logs-check
    title: "Job Logs Check"
    description: "The data-processor job must log 'Data processing completed successfully!'"
    order: 2
    type: log
    spec:
      target:
        kind: Pod
        labelSelector:
          app: data-processor
      container: processor
      expectedStrings:
        - "Data processing completed successfully!"
      sinceSeconds: 300
