apiVersion: v1
kind: Secret
metadata:
  name: app-tls
  namespace: cert-mismatch
  annotations:
    argocd.argoproj.io/sync-wave: "2"
type: kubernetes.io/tls
data:
  # Self-signed certificate for api.example.com (WRONG CN - should be app.example.com)
  # This is the BUG: certificate CN doesn't match the Ingress host
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNwRENDQVl3Q0NRRFUrcFE0WEhDekhEQU5CZ2txaGtpRzl3MEJBUXNGQURBVU1SSXdFQVlEVlFRRERBbHMKYjJOaGJHaHZjM1F3SGhjTk1qUXdNVEF4TURBd01EQXdXaGNOTWpVd01UQXhNREF3TURBd1dqQVVNUkl3RUFZRApWUVFEREFsc2IyTmhiR2h2YzNRd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUM3Cm81ZTdFcDZKZlFscXhVM1E3UWEyZzZwVC9BSCtKNVlMS3NIMG1LMEcrYkZsZ05zajVGWThRVzdzbnlsK1JRcTgKY3EzWjV4M1k4QTlGOFM5TThMMnF2M2tZMkY2cks5ZkJtTjFySCtYVnEyUDN2REM3WTVFNWXGQENLN0JDTTFNOU8KTjBFQVlYd0xWREhXOEZHVDlPME5GbDhjRGpPMEVJajVJSGRUOU82UTVTN2NFTFJtNVYwUzVScTVyQzNCOHZMQgo1UWs4cjVCMGNEMExOM0xCcEE1Y0U1ajVLSjVyTDFCNWNNNWtMM0U1RjFCNWNONXBMMEU1Y1E1dEI1Y1I1dUw1CmNTNXZCNWNUNXdMNWNVNXhCNWNWNXlMNWNXNXpCNWNYNTBMNWNZNTFCNWNaNTJMNWNhNTNCNWNiNTRMNWNjNTUKQWdNQkFBRXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBSkhCMHJFNUU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNQpFNUU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNQpFNUU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNQpFNUU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNQpFNUU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNQpFNUU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNUVFNkU1RTVFNQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnZ2dnU2tBZ0VBQW9JQkFRQzdvNWU3RXA2SmZRbHEKeFUzUTdRYTJnNnBUL0FIK0o1WUxLc0gwbUswRytiRmxnTnNqNUZZOFFXN3NubCtSUXE4Y3EzWjV4M1k4QTlGOApTOU04TDJxdjNrWTJGNnJLOWZCbU4xckgrWFZxMlAzdkRDN1k1RTVsRk44SzdCTmIxTTlPTjBFQVlYd0xWREhXCjhGR1Q5TzBORmw4Y0RqTzBFSWo1SUhkVDlPNlE1UzdjRUxSbTVWMFM1UnE1ckMzQjh2TEI1UWs4cjVCMGNEMEwKTjNMQnBBNWNFNWo1S0o1ckwxQjVjTTVrTDNFNUYxQjVjTjVwTDBFNWNRNXRCNWNSNXVMNWNTNXZCNWNUNXdMNQpjVTV4QjVjVjV5TDVjVzV6QjVjWDUwTDVjWTUxQjVjWjUyTDVjYTUzQjVjYjU0TDVjYzU1QWdNQkFBRUNnZ0VBClo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjUKWjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNQpaRVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1Clo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjUKWjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNVo1WjVaNQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0t
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: secure-app
  namespace: cert-mismatch
  annotations:
    argocd.argoproj.io/sync-wave: "3"
spec:
  ingressClassName: nginx
  tls:
    - hosts:
        - api.example.com  # BUG: Should be app.example.com to match the rules
      secretName: app-tls
  rules:
    - host: app.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: secure-app
                port:
                  number: 80
