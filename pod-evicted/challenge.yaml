title: Pod Evicted
description: |
  A data processing pod keeps crashing and getting evicted.
  It was working fine yesterday, but now Kubernetes keeps killing it.
theme: resources-scaling
difficulty: easy
type: fix
estimatedTime: 15
starterFriendly: true
initialSituation: |
  A data processing application is deployed as a single pod.
  The pod starts successfully but after a few seconds gets OOMKilled (Out of Memory).
  It enters a CrashLoopBackOff state and keeps restarting.
  The application code hasn't changed, but Kubernetes is now enforcing resource limits.
  The pod's memory usage exceeds the configured limit, causing eviction.
objective: |
  Fix the resource configuration so the pod can run without being evicted.
  Understand the difference between requests and limits, and how Kubernetes manages resources.

objectives:
  - key: pod-running-check
    title: "Pod Ready"
    description: "The data-processor pod must be running and in Ready state"
    order: 1
    type: condition
    spec:
      target:
        kind: Pod
        labelSelector:
          app: data-processor
      checks:
        - type: Ready
          status: "True"

  - key: no-oom-eviction
    title: "No OOM/Eviction Events"
    description: "The pod should run without being evicted or killed by the system"
    order: 2
    type: event
    spec:
      target:
        kind: Pod
        labelSelector:
          app: data-processor
      forbiddenReasons:
        - "Evicted"
        - "OOMKilled"
        - "FailedScheduling"
      sinceSeconds: 300

  - key: low-restart-count
    title: "Low Restart Count"
    description: "The data-processor pod must have fewer than 3 restarts (stable operation)"
    order: 3
    type: status
    spec:
      target:
        kind: Pod
        labelSelector:
          app: data-processor
      checks:
        - field: containerStatuses[0].restartCount
          operator: "<"
          value: 3
