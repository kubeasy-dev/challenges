title: Pod Evicted
description: |
  A data processing pod keeps crashing and getting evicted.
  It was working fine yesterday, but now Kubernetes keeps killing it.
theme: resources-scaling
difficulty: easy
type: fix
estimatedTime: 15
initialSituation: |
  A data processing application is deployed as a single pod.
  The pod starts but keeps crashing after a few seconds.
  It enters a CrashLoopBackOff state and keeps restarting.
  The application code hasn't changed - it was working fine in the previous environment.
objective: |
  Investigate why the pod keeps crashing and fix it so it runs stably.
  The pod should stay running without being killed by the system.

objectives:
  - key: pod-running-check
    title: "Pod Ready"
    description: "The data-processor pod must be running and in Ready state"
    order: 1
    type: condition
    spec:
      target:
        kind: Pod
        labelSelector:
          app: data-processor
      checks:
        - type: Ready
          status: "True"

  - key: no-oom-eviction
    title: "No OOM/Eviction Events"
    description: "The pod should run without being evicted or killed by the system"
    order: 2
    type: event
    spec:
      target:
        kind: Pod
        labelSelector:
          app: data-processor
      forbiddenReasons:
        - "Evicted"
        - "OOMKilled"
        - "FailedScheduling"
      sinceSeconds: 300

  - key: low-restart-count
    title: "Low Restart Count"
    description: "The data-processor pod must have fewer than 3 restarts (stable operation)"
    order: 3
    type: status
    spec:
      target:
        kind: Pod
        labelSelector:
          app: data-processor
      checks:
        - field: containerStatuses[0].restartCount
          operator: "<"
          value: 3
